<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task Manager - Tasks</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <!-- Vue.js -->
    <script src="https://unpkg.com/vue@3"></script>
    <!-- Custom CSS -->
    <style>
      .modal-custom-backdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(5px);
        z-index: 1040;
      }
    </style>
  </head>
  <body>
    <div id="app" class="container">
      <!-- Header -->
      <div class="row p-5 d-flex justify-content-between align-items-center">
        <div class="col">
          <h1 class="display-4">{{ listName }}</h1>
        </div>
        <!-- Add new task button -->
        <div class="col text-end">
          <button class="btn btn-outline-secondary me-3" @click="showNewTask = true">&plus; Add Task</button>
          <a href="index.html" class="btn btn-outline-secondary">Back to Lists</a>
        </div>
      </div>

      <!-- Tasks Section -->
      <div class="row">
        <div class="col-12" v-for="task in tasks" :key="task.id">
          <div class="card mb-2">
            <div class="card-body">
              <h5>{{ task.task_name }}</h5>
              <p>Due date: {{ task.due_date }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Custom backdrop for modal -->
      <div v-if="showNewTask" class="modal-custom-backdrop" @click="showNewTask = false"></div>

      <!-- Modal for adding a new task -->
      <div class="modal fade show d-block" tabindex="-1" v-if="showNewTask">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">New Task</h5>
              <button type="button" class="btn-close" aria-label="Close" @click="showNewTask = false"></button>
            </div>
            <div class="modal-body">
              <form @submit.prevent="addTask">
                <div class="form-group mb-3">
                  <label class="form-label" for="taskName">Task Name</label>
                  <input type="text" id="taskName" class="form-control" v-model="newTask.task_name">
                </div>
                <div class="form-group mb-3">
                  <label class="form-label" for="dueDate">Due Date</label>
                  <input type="date" id="dueDate" class="form-control" v-model="newTask.due_date">
                </div>
                <button type="submit" class="btn btn-primary">Add Task</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- include app.js file -->
    <script src="tasks.js"></script>
  </body>
</html>
